{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[27],{U4LM:function(e,n){var a={kind:\"Document\",definitions:[{kind:\"OperationDefinition\",operation:\"mutation\",name:{kind:\"Name\",value:\"reset\"},variableDefinitions:[{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"resetUrl\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"URL\"}}},directives:[]},{kind:\"VariableDefinition\",variable:{kind:\"Variable\",name:{kind:\"Name\",value:\"password\"}},type:{kind:\"NonNullType\",type:{kind:\"NamedType\",name:{kind:\"Name\",value:\"String\"}}},directives:[]}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"customerResetByUrl\"},arguments:[{kind:\"Argument\",name:{kind:\"Name\",value:\"resetUrl\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"resetUrl\"}}},{kind:\"Argument\",name:{kind:\"Name\",value:\"password\"},value:{kind:\"Variable\",name:{kind:\"Name\",value:\"password\"}}}],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"customer\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"id\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"customerAccessToken\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"accessToken\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"expiresAt\"},arguments:[],directives:[]}]}},{kind:\"Field\",name:{kind:\"Name\",value:\"customerUserErrors\"},arguments:[],directives:[],selectionSet:{kind:\"SelectionSet\",selections:[{kind:\"Field\",name:{kind:\"Name\",value:\"code\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"field\"},arguments:[],directives:[]},{kind:\"Field\",name:{kind:\"Name\",value:\"message\"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:289}};a.loc.source={body:\"mutation reset($resetUrl: URL!, $password: String!) {\\n  customerResetByUrl(resetUrl: $resetUrl, password: $password) {\\n    customer {\\n      id\\n    }\\n    customerAccessToken {\\n      accessToken\\n      expiresAt\\n    }\\n    customerUserErrors {\\n      code\\n      field\\n      message\\n    }\\n  }\\n}\\n\",name:\"GraphQL request\",locationOffset:{line:1,column:1}};var s={};function i(e,n){for(var a=0;a<e.definitions.length;a++){var s=e.definitions[a];if(s.name&&s.name.value==n)return s}}a.definitions.forEach((function(e){if(e.name){var n=new Set;!function e(n,a){if(\"FragmentSpread\"===n.kind)a.add(n.name.value);else if(\"VariableDefinition\"===n.kind){var s=n.type;\"NamedType\"===s.kind&&a.add(s.name.value)}n.selectionSet&&n.selectionSet.selections.forEach((function(n){e(n,a)})),n.variableDefinitions&&n.variableDefinitions.forEach((function(n){e(n,a)})),n.definitions&&n.definitions.forEach((function(n){e(n,a)}))}(e,n),s[e.name.value]=n}})),e.exports=a,e.exports.reset=function(e,n){var a={kind:e.kind,definitions:[i(e,n)]};e.hasOwnProperty(\"loc\")&&(a.loc=e.loc);var t=s[n]||new Set,r=new Set,o=new Set;for(t.forEach((function(e){o.add(e)}));o.size>0;){var d=o;o=new Set,d.forEach((function(e){r.has(e)||(r.add(e),(s[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var s=i(e,n);s&&a.definitions.push(s)})),a}(a,\"reset\")},fqdl:function(e,n,a){\"use strict\";a.r(n);var s=a(\"q1tI\"),i=a.n(s),t=a(\"GPXY\"),r=a(\"VUUK\"),o=a(\"Pvxg\"),d=a(\"Z7Pt\"),c=a(\"UGp+\"),l=a(\"Ir0z\"),u=a(\"KYPV\"),m=a(\"htLD\"),k=a(\"jbMX\"),v=a(\"k7Sn\"),p=i.a.createElement;function f(e){const{isValid:n,isSubmitting:a}=Object(u.e)(),{t:s}=Object(v.useTranslation)();return p(u.b,{className:\"form\"},p(\"div\",{className:\"note span--2\"},s(\"enterNewPassword\")),p(k.b,{className:\"field span--2\",type:\"password\",name:\"password\",placeholder:s(\"password\")}),p(k.b,{className:\"field span--2\",type:\"password\",name:\"password2\",placeholder:s(\"confirmPassword\")}),e.errorMessages.length>0&&p(\"div\",{className:\"error-message span--2\"},e.errorMessages.map(e=>p(\"div\",{className:\"row\",key:e},e))),p(m.a,{className:\"button span--2\",disabled:!n,isLoading:a,isSubmit:!0,width:\"flex\"},s(\"setNewPassword\")))}var w=a(\"i6vu\"),N=a(\"U4LM\"),b=a.n(N),S=a(\"ttZb\"),h=a(\"xc8W\"),g=a(\"nOHt\"),y=i.a.createElement;n.default=function(e){const n=Object(g.useRouter)(),{t:a}=Object(v.useTranslation)(),[i]=Object(S.c)(b.a),{0:m,1:k}=Object(s.useState)([]),p=Object(s.useContext)(h.a),N=Object(s.useCallback)(()=>n.push(\"/\"),[n]),U=Object(s.useCallback)(async(n,s)=>{try{const a=await i({variables:{password:n.password,resetUrl:\"https://cruvoir.com\"+e.asPath}}),c=t.a(r.a(\"message\"),o.a([],[\"customerUserErrors\"]))(a.data.customerResetByUrl);if(d.a(c))return k(c);p.saveToken({expiresAt:new Date(a.data.customerResetByUrl.customerAccessToken.expiresAt),token:a.data.customerResetByUrl.customerAccessToken.accessToken}),s.resetForm(),await N()}catch(c){console.error(c);const e=t.a(r.a(\"message\"),o.a([],[\"graphQLErrors\"]))(c);k(e||[a(\"recoverFailed\")])}},[N,e.asPath,i,a,p]),E=c.b().shape({password:c.d().required(),password2:c.d().required().oneOf([c.c(\"password\"),null],a(\"passwordsMustMatch\"))});return y(w.a,null,y(l.a,{close:N},y(\"div\",{className:\"header\"},y(\"h2\",{className:\"title\"},a(\"resetYourPassword\"))),y(\"div\",{className:\"content\"},y(u.c,{initialValues:{password:\"\",password2:\"\"},validationSchema:E,onSubmit:U},y(f,{errorMessages:m})),y(\"button\",{className:\"close-button\",onClick:N,type:\"button\"},a(\"cancel\")))))}},nSJS:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/account/reset/[id]/[token]\",function(){return a(\"fqdl\")}])}},[[\"nSJS\",0,1,3,2,4,5,6,7]]]);","extractedComments":[]}