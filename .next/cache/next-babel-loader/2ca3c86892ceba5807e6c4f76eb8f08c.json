{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport { config as i18nConfig, useTranslation } from \"../../../../../i18n\";\nimport { useCallback, useContext, useMemo, useRef } from 'react';\nimport { addTranslationsFromPO } from \"../../../helpers\";\nimport { CartContext } from \"../../../CartContext\";\nimport { CategoryItem } from \"./CategoryItem\";\nimport cn from 'classnames';\nimport { CurrencyContext } from \"../../../CurrencyContext\";\nimport { Dropdown } from \"./Dropdown\";\nimport { FeaturedMenuContext } from \"../../../FeaturedMenuContext\";\nimport { GenderLinks } from \"./GenderLinks\";\nimport getConfig from 'next/config';\nimport { Icon } from \"../../../Icon\";\nimport { Link } from \"../../../Link\";\nimport { useClickOutside } from \"../../../hooks\";\nimport { UserContext } from \"../../../UserContext\";\nimport { UserMenu } from \"./UserMenu\";\nimport { WishListContext } from \"../../../WishListContext\";\nconst {\n  publicRuntimeConfig\n} = getConfig();\nconst currenciesMap = {\n  CAD: {\n    full: 'CAD (C$)',\n    short: 'CAD (C$)'\n  },\n  EUR: {\n    full: 'EUR (€)',\n    short: 'EUR (€)'\n  },\n  GBP: {\n    full: 'GBP (£)',\n    short: 'GBP (£)'\n  },\n  USD: {\n    full: 'USD ($)',\n    short: 'USD ($)'\n  }\n};\nconst languagesMap = {\n  de: {\n    full: 'Deutsch',\n    short: 'De'\n  },\n  en: {\n    full: 'English',\n    short: 'En'\n  },\n  es: {\n    full: 'Espanol',\n    short: 'Es'\n  },\n  fr: {\n    full: 'Français',\n    short: 'Fr'\n  }\n};\n\nconst processMenuItemLabel = label => {\n  return label.split(' ').join('\\u00A0');\n};\n\nexport function Menu(props) {\n  const {\n    i18n,\n    t\n  } = useTranslation();\n  const close = props.close;\n  const cartCtx = useContext(CartContext);\n  const currencyContext = useContext(CurrencyContext);\n  const userCtx = useContext(UserContext);\n  const wishListCtx = useContext(WishListContext);\n  const featuredMenuCtx = useContext(FeaturedMenuContext);\n  const changeCurrency = useCallback(currency => {\n    currencyContext.setActivePersistent(currency);\n    close();\n  }, [close, currencyContext]);\n  const changeLanguage = useCallback(async newLanguage => {\n    // English translations are already loaded from Shopify, no need in requesting translations service\n    i18n.changeLanguage(newLanguage);\n    close();\n    if (newLanguage === 'en') return;\n\n    try {\n      addTranslationsFromPO({\n        i18n,\n        lang: newLanguage,\n        translations: await (await fetch(`${publicRuntimeConfig.NEXT_PUBLIC_APP_URL}/api/translations/${newLanguage}/products`)).json()\n      }); // The order of i18n.addResources() and i18n.changeLanguage() calls is important\n\n      i18n.changeLanguage(newLanguage);\n    } catch (error) {\n      console.error(error);\n    }\n  }, [close, i18n]);\n  const welcomeMessage = useMemo(() => {\n    if (!userCtx.user) return;\n    return userCtx.user.firstName ? t('helloUsername', {\n      userName: userCtx.user.firstName\n    }) : userCtx.user.email;\n  }, [t, userCtx.user]);\n  const featuredMenuItemsWithNewAndViewAll = useMemo(() => [{\n    category: 'all',\n    collection: 'all',\n    list: [],\n    subcategory: 'all',\n    title: 'view all'\n  }, {\n    category: 'all',\n    collection: `${props.gender}s-new`,\n    list: [],\n    subcategory: 'all',\n    title: 'New'\n  }, ...featuredMenuCtx[props.gender]], [featuredMenuCtx, props.gender]);\n  const popupRef = useRef(null);\n  useClickOutside({\n    callback: close,\n    intactId: props.intactId,\n    reference: popupRef\n  });\n  return __jsx(\"div\", {\n    className: props.className,\n    ref: popupRef\n  }, __jsx(\"button\", {\n    className: \"button\",\n    onClick: close\n  }, __jsx(Icon, {\n    className: \"icon\",\n    name: \"cross\"\n  })), __jsx(\"div\", {\n    className: \"section\"\n  }, __jsx(\"div\", {\n    className: \"scroll\"\n  }, userCtx.user && __jsx(\"div\", {\n    className: \"welcome\"\n  }, __jsx(\"div\", {\n    className: \"message\"\n  }, welcomeMessage), __jsx(\"hr\", {\n    className: \"divider\"\n  })), __jsx(\"div\", {\n    className: \"navigation\"\n  }, __jsx(GenderLinks, {\n    className: \"gender\",\n    close: close,\n    gender: props.gender,\n    isBlogDomain: props.isBlogDomain\n  }), __jsx(\"div\", {\n    className: \"list\"\n  }, featuredMenuItemsWithNewAndViewAll.map(item => __jsx(CategoryItem\n  /* eslint-disable-next-line max-len */\n  , {\n    as: `/${props.gender}/shop/collection/${item.collection}/category/${item.category}/subcategory/${item.subcategory}${item.tag ? `?tags=${item.tag}` : ''}`,\n    close: close,\n    hasAppDomain: props.isBlogDomain\n    /* eslint-disable-next-line max-len */\n    ,\n    href: \"/[gender]/shop/collection/[collection]/category/[category]/subcategory/[subcategory]\",\n    intactId: props.intactId,\n    items: item.list,\n    key: item.title,\n    popupRef: popupRef\n  }, processMenuItemLabel(t(item.title)))))), __jsx(\"div\", {\n    className: \"actions\"\n  }, __jsx(\"hr\", {\n    className: \"divider\"\n  }), __jsx(Link, {\n    className: \"link type--cart\",\n    href: \"/cart\",\n    onClick: close\n  }, __jsx(Icon, {\n    className: \"icon type--cart\",\n    name: \"cart\"\n  }), processMenuItemLabel(t('myBag')), __jsx(\"span\", {\n    className: cn('counter', {\n      'is-active': cartCtx.itemsCount > 0\n    })\n  }, cartCtx.itemsCount > 99 ? ':)' : cartCtx.itemsCount)), __jsx(Link, {\n    as: `/wish/${props.gender}/category/all/subcategory/all`,\n    className: \"link type--wish\",\n    href: \"/wish/[gender]/category/[category]/subcategory/[subcategory]\",\n    onClick: close\n  }, __jsx(Icon, {\n    className: \"icon type--wish\",\n    name: wishListCtx.list.length > 0 ? 'wish-fill' : 'wish'\n  }), processMenuItemLabel(t('myWishList'))), __jsx(\"hr\", {\n    className: \"divider\"\n  }), __jsx(Dropdown, {\n    className: \"dropdown type--language\",\n    currentItem: i18n.language,\n    intactId: \"languages-menu\",\n    list: i18nConfig.allLanguages,\n    onChange: changeLanguage,\n    translations: languagesMap\n  }), __jsx(\"hr\", {\n    className: \"divider\"\n  }), __jsx(Dropdown, {\n    className: \"dropdown type--currency\",\n    currentItem: currencyContext.active,\n    intactId: \"currencies-menu\",\n    list: Object.keys(currenciesMap),\n    onChange: changeCurrency,\n    translations: currenciesMap\n  }), __jsx(\"hr\", {\n    className: \"divider\"\n  }), __jsx(UserMenu, {\n    className: \"user-menu-wrapper type--user\",\n    closeMenu: close,\n    welcomeMessage: welcomeMessage\n  })))));\n}","map":{"version":3,"sources":["D:/Work/web/direlli/frontend/components/common/Layout/Header/Menu/index.tsx"],"names":["config","i18nConfig","useTranslation","useCallback","useContext","useMemo","useRef","addTranslationsFromPO","CartContext","CategoryItem","cn","CurrencyContext","Dropdown","FeaturedMenuContext","GenderLinks","getConfig","Icon","Link","useClickOutside","UserContext","UserMenu","WishListContext","publicRuntimeConfig","currenciesMap","CAD","full","short","EUR","GBP","USD","languagesMap","de","en","es","fr","processMenuItemLabel","label","split","join","Menu","props","i18n","t","close","cartCtx","currencyContext","userCtx","wishListCtx","featuredMenuCtx","changeCurrency","currency","setActivePersistent","changeLanguage","newLanguage","lang","translations","fetch","NEXT_PUBLIC_APP_URL","json","error","console","welcomeMessage","user","firstName","userName","email","featuredMenuItemsWithNewAndViewAll","category","collection","list","subcategory","title","gender","popupRef","callback","intactId","reference","className","isBlogDomain","map","item","tag","itemsCount","length","language","allLanguages","active","Object","keys"],"mappings":";;AACA,SAAQA,MAAM,IAAIC,UAAlB,EAA8BC,cAA9B;AACA,SAAQC,WAAR,EAAqBC,UAArB,EAAiCC,OAAjC,EAA0CC,MAA1C,QAAuD,OAAvD;AACA,SAAQC,qBAAR;AACA,SAAQC,WAAR;AACA,SAAQC,YAAR;AACA,OAAOC,EAAP,MAAe,YAAf;AACA,SAAQC,eAAR;AACA,SAAQC,QAAR;AACA,SAAQC,mBAAR;AACA,SAAQC,WAAR;AACA,OAAOC,SAAP,MAAsB,aAAtB;AACA,SAAQC,IAAR;AACA,SAAQC,IAAR;AACA,SAAQC,eAAR;AACA,SAAQC,WAAR;AACA,SAAQC,QAAR;AACA,SAAQC,eAAR;AACA,MAAM;AAACC,EAAAA;AAAD,IAAwBP,SAAS,EAAvC;AAEA,MAAMQ,aAAkE,GAAG;AACzEC,EAAAA,GAAG,EAAE;AAACC,IAAAA,IAAI,EAAE,UAAP;AAAmBC,IAAAA,KAAK,EAAE;AAA1B,GADoE;AAEzEC,EAAAA,GAAG,EAAE;AAACF,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAFoE;AAGzEE,EAAAA,GAAG,EAAE;AAACH,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAHoE;AAIzEG,EAAAA,GAAG,EAAE;AAACJ,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE;AAAzB;AAJoE,CAA3E;AAOA,MAAMI,YAAY,GAAG;AACnBC,EAAAA,EAAE,EAAE;AAACN,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GADe;AAEnBM,EAAAA,EAAE,EAAE;AAACP,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAFe;AAGnBO,EAAAA,EAAE,EAAE;AAACR,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE;AAAzB,GAHe;AAInBQ,EAAAA,EAAE,EAAE;AAACT,IAAAA,IAAI,EAAE,UAAP;AAAmBC,IAAAA,KAAK,EAAE;AAA1B;AAJe,CAArB;;AAOA,MAAMS,oBAAoB,GAAIC,KAAD,IAAmB;AAC9C,SAAOA,KAAK,CAACC,KAAN,CAAY,GAAZ,EAAiBC,IAAjB,CAAsB,QAAtB,CAAP;AACD,CAFD;;AAIA,OAAO,SAASC,IAAT,CAAcC,KAAd,EAMJ;AACD,QAAM;AAACC,IAAAA,IAAD;AAAOC,IAAAA;AAAP,MAAYxC,cAAc,EAAhC;AACA,QAAMyC,KAAK,GAAGH,KAAK,CAACG,KAApB;AACA,QAAMC,OAAO,GAAGxC,UAAU,CAACI,WAAD,CAA1B;AACA,QAAMqC,eAAe,GAAGzC,UAAU,CAACO,eAAD,CAAlC;AACA,QAAMmC,OAAO,GAAG1C,UAAU,CAACe,WAAD,CAA1B;AACA,QAAM4B,WAAW,GAAG3C,UAAU,CAACiB,eAAD,CAA9B;AACA,QAAM2B,eAAe,GAAG5C,UAAU,CAACS,mBAAD,CAAlC;AAEA,QAAMoC,cAAc,GAAG9C,WAAW,CAAC+C,QAAQ,IAAI;AAC7CL,IAAAA,eAAe,CAACM,mBAAhB,CAAoCD,QAApC;AACAP,IAAAA,KAAK;AACN,GAHiC,EAG/B,CAACA,KAAD,EAAQE,eAAR,CAH+B,CAAlC;AAKA,QAAMO,cAAc,GAAGjD,WAAW,CAAC,MAAMkD,WAAN,IAAqB;AACtD;AACAZ,IAAAA,IAAI,CAACW,cAAL,CAAoBC,WAApB;AACAV,IAAAA,KAAK;AAEL,QAAGU,WAAW,KAAK,IAAnB,EACE;;AAEF,QAAI;AACF9C,MAAAA,qBAAqB,CAAC;AACpBkC,QAAAA,IADoB;AAEpBa,QAAAA,IAAI,EAAED,WAFc;AAIpBE,QAAAA,YAAY,EAAE,MAAM,CAClB,MAAMC,KAAK,CAAE,GAAElC,mBAAmB,CAACmC,mBAAoB,qBAAoBJ,WAAY,WAA5E,CADO,EAElBK,IAFkB;AAJA,OAAD,CAArB,CADE,CAUF;;AACAjB,MAAAA,IAAI,CAACW,cAAL,CAAoBC,WAApB;AACD,KAZD,CAYE,OAAMM,KAAN,EAAa;AACbC,MAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;AACD;AACF,GAvBiC,EAuB/B,CAAChB,KAAD,EAAQF,IAAR,CAvB+B,CAAlC;AAyBA,QAAMoB,cAAc,GAAGxD,OAAO,CAAC,MAAM;AACnC,QAAG,CAACyC,OAAO,CAACgB,IAAZ,EACE;AAEF,WAAOhB,OAAO,CAACgB,IAAR,CAAaC,SAAb,GAAyBrB,CAAC,CAAC,eAAD,EAAkB;AAACsB,MAAAA,QAAQ,EAAElB,OAAO,CAACgB,IAAR,CAAaC;AAAxB,KAAlB,CAA1B,GAAkFjB,OAAO,CAACgB,IAAR,CAAaG,KAAtG;AACD,GAL6B,EAK3B,CAACvB,CAAD,EAAII,OAAO,CAACgB,IAAZ,CAL2B,CAA9B;AAOA,QAAMI,kCAAkC,GAAG7D,OAAO,CAAC,MAAM,CACvD;AACE8D,IAAAA,QAAQ,EAAK,KADf;AAEEC,IAAAA,UAAU,EAAG,KAFf;AAGEC,IAAAA,IAAI,EAAS,EAHf;AAIEC,IAAAA,WAAW,EAAE,KAJf;AAKEC,IAAAA,KAAK,EAAQ;AALf,GADuD,EASvD;AACEJ,IAAAA,QAAQ,EAAK,KADf;AAEEC,IAAAA,UAAU,EAAI,GAAE5B,KAAK,CAACgC,MAAO,OAF/B;AAGEH,IAAAA,IAAI,EAAS,EAHf;AAIEC,IAAAA,WAAW,EAAE,KAJf;AAKEC,IAAAA,KAAK,EAAQ;AALf,GATuD,EAiBvD,GAAGvB,eAAe,CAACR,KAAK,CAACgC,MAAP,CAjBqC,CAAP,EAkB/C,CAACxB,eAAD,EAAkBR,KAAK,CAACgC,MAAxB,CAlB+C,CAAlD;AAoBA,QAAMC,QAAQ,GAAGnE,MAAM,CAAC,IAAD,CAAvB;AACAY,EAAAA,eAAe,CAAC;AAACwD,IAAAA,QAAQ,EAAE/B,KAAX;AAAkBgC,IAAAA,QAAQ,EAAEnC,KAAK,CAACmC,QAAlC;AAA4CC,IAAAA,SAAS,EAAEH;AAAvD,GAAD,CAAf;AAEA,SAAO;AAAK,IAAA,SAAS,EAAEjC,KAAK,CAACqC,SAAtB;AAAiC,IAAA,GAAG,EAAEJ;AAAtC,KACL;AAAQ,IAAA,SAAS,EAAC,QAAlB;AAA2B,IAAA,OAAO,EAAE9B;AAApC,KACE,MAAC,IAAD;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAuB,IAAA,IAAI,EAAC;AAA5B,IADF,CADK,EAKL;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAK,IAAA,SAAS,EAAC;AAAf,KACGG,OAAO,CAACgB,IAAR,IAAgB;AAAK,IAAA,SAAS,EAAC;AAAf,KACf;AAAK,IAAA,SAAS,EAAC;AAAf,KACGD,cADH,CADe,EAKf;AAAI,IAAA,SAAS,EAAC;AAAd,IALe,CADnB,EASE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE,MAAC,WAAD;AACE,IAAA,SAAS,EAAC,QADZ;AAEE,IAAA,KAAK,EAAElB,KAFT;AAGE,IAAA,MAAM,EAAEH,KAAK,CAACgC,MAHhB;AAIE,IAAA,YAAY,EAAEhC,KAAK,CAACsC;AAJtB,IADF,EAQE;AAAK,IAAA,SAAS,EAAC;AAAf,KACGZ,kCAAkC,CAACa,GAAnC,CAAuCC,IAAI,IAAI,MAAC;AAC/C;AAD8C;AAE9C,IAAA,EAAE,EAAG,IAAGxC,KAAK,CAACgC,MAAO,oBAAmBQ,IAAI,CAACZ,UAAW,aAAYY,IAAI,CAACb,QAAS,gBAAea,IAAI,CAACV,WAAY,GAAEU,IAAI,CAACC,GAAL,GAAY,SAAQD,IAAI,CAACC,GAAI,EAA7B,GAAiC,EAAG,EAF1G;AAG9C,IAAA,KAAK,EAAEtC,KAHuC;AAI9C,IAAA,YAAY,EAAEH,KAAK,CAACsC;AACpB;AAL8C;AAM9C,IAAA,IAAI,EAAC,sFANyC;AAO9C,IAAA,QAAQ,EAAEtC,KAAK,CAACmC,QAP8B;AAQ9C,IAAA,KAAK,EAAEK,IAAI,CAACX,IARkC;AAS9C,IAAA,GAAG,EAAEW,IAAI,CAACT,KAToC;AAU9C,IAAA,QAAQ,EAAEE;AAVoC,KAY7CtC,oBAAoB,CAACO,CAAC,CAACsC,IAAI,CAACT,KAAN,CAAF,CAZyB,CAA/C,CADH,CARF,CATF,EAmCE;AAAK,IAAA,SAAS,EAAC;AAAf,KACE;AAAI,IAAA,SAAS,EAAC;AAAd,IADF,EAGE,MAAC,IAAD;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAkC,IAAA,IAAI,EAAC,OAAvC;AAA+C,IAAA,OAAO,EAAE5B;AAAxD,KACE,MAAC,IAAD;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAkC,IAAA,IAAI,EAAC;AAAvC,IADF,EAEGR,oBAAoB,CAACO,CAAC,CAAC,OAAD,CAAF,CAFvB,EAIE;AAAM,IAAA,SAAS,EAAEhC,EAAE,CAAC,SAAD,EAAY;AAAC,mBAAakC,OAAO,CAACsC,UAAR,GAAqB;AAAnC,KAAZ;AAAnB,KACGtC,OAAO,CAACsC,UAAR,GAAqB,EAArB,GAA0B,IAA1B,GAAiCtC,OAAO,CAACsC,UAD5C,CAJF,CAHF,EAYE,MAAC,IAAD;AACE,IAAA,EAAE,EAAG,SAAQ1C,KAAK,CAACgC,MAAO,+BAD5B;AAEE,IAAA,SAAS,EAAC,iBAFZ;AAGE,IAAA,IAAI,EAAC,8DAHP;AAIE,IAAA,OAAO,EAAE7B;AAJX,KAME,MAAC,IAAD;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAkC,IAAA,IAAI,EAAEI,WAAW,CAACsB,IAAZ,CAAiBc,MAAjB,GAA0B,CAA1B,GAA8B,WAA9B,GAA4C;AAApF,IANF,EAOGhD,oBAAoB,CAACO,CAAC,CAAC,YAAD,CAAF,CAPvB,CAZF,EAsBE;AAAI,IAAA,SAAS,EAAC;AAAd,IAtBF,EAwBE,MAAC,QAAD;AACE,IAAA,SAAS,EAAC,yBADZ;AAEE,IAAA,WAAW,EAAED,IAAI,CAAC2C,QAFpB;AAGE,IAAA,QAAQ,EAAC,gBAHX;AAIE,IAAA,IAAI,EAAEnF,UAAU,CAACoF,YAJnB;AAKE,IAAA,QAAQ,EAAEjC,cALZ;AAME,IAAA,YAAY,EAAEtB;AANhB,IAxBF,EAiCE;AAAI,IAAA,SAAS,EAAC;AAAd,IAjCF,EAmCE,MAAC,QAAD;AACE,IAAA,SAAS,EAAC,yBADZ;AAEE,IAAA,WAAW,EAAEe,eAAe,CAACyC,MAF/B;AAGE,IAAA,QAAQ,EAAC,iBAHX;AAIE,IAAA,IAAI,EAAEC,MAAM,CAACC,IAAP,CAAYjE,aAAZ,CAJR;AAKE,IAAA,QAAQ,EAAE0B,cALZ;AAME,IAAA,YAAY,EAAE1B;AANhB,IAnCF,EA4CE;AAAI,IAAA,SAAS,EAAC;AAAd,IA5CF,EA6CE,MAAC,QAAD;AAAU,IAAA,SAAS,EAAC,8BAApB;AAAmD,IAAA,SAAS,EAAEoB,KAA9D;AAAqE,IAAA,cAAc,EAAEkB;AAArF,IA7CF,CAnCF,CADF,CALK,CAAP;AA2FD","sourcesContent":["import {Currency as CurrencyType, Gender} from 'components/common/types'\nimport {config as i18nConfig, useTranslation} from 'i18n'\nimport {useCallback, useContext, useMemo, useRef} from 'react'\nimport {addTranslationsFromPO} from 'components/common/helpers'\nimport {CartContext} from 'components/common/CartContext'\nimport {CategoryItem} from './CategoryItem'\nimport cn from 'classnames'\nimport {CurrencyContext} from 'components/common/CurrencyContext'\nimport {Dropdown} from './Dropdown'\nimport {FeaturedMenuContext} from 'components/common/FeaturedMenuContext'\nimport {GenderLinks} from './GenderLinks'\nimport getConfig from 'next/config'\nimport {Icon} from 'components/common/Icon'\nimport {Link} from 'components/common/Link'\nimport {useClickOutside} from 'components/common/hooks'\nimport {UserContext} from 'components/common/UserContext'\nimport {UserMenu} from './UserMenu'\nimport {WishListContext} from 'components/common/WishListContext'\nconst {publicRuntimeConfig} = getConfig()\n\nconst currenciesMap: Record<CurrencyType, {full: string, short: string}> = {\n  CAD: {full: 'CAD (C$)', short: 'CAD (C$)'},\n  EUR: {full: 'EUR (€)', short: 'EUR (€)'},\n  GBP: {full: 'GBP (£)', short: 'GBP (£)'},\n  USD: {full: 'USD ($)', short: 'USD ($)'},\n}\n\nconst languagesMap = {\n  de: {full: 'Deutsch', short: 'De'},\n  en: {full: 'English', short: 'En'},\n  es: {full: 'Espanol', short: 'Es'},\n  fr: {full: 'Français', short: 'Fr'},\n}\n\nconst processMenuItemLabel = (label: string) => {\n  return label.split(' ').join('\\u00A0')\n}\n\nexport function Menu(props: {\n  className?: string\n  close: () => void\n  gender: Gender\n  intactId: string\n  isBlogDomain: boolean\n}) {\n  const {i18n, t} = useTranslation()\n  const close = props.close\n  const cartCtx = useContext(CartContext)\n  const currencyContext = useContext(CurrencyContext)\n  const userCtx = useContext(UserContext)\n  const wishListCtx = useContext(WishListContext)\n  const featuredMenuCtx = useContext(FeaturedMenuContext)\n\n  const changeCurrency = useCallback(currency => {\n    currencyContext.setActivePersistent(currency)\n    close()\n  }, [close, currencyContext])\n\n  const changeLanguage = useCallback(async newLanguage => {\n    // English translations are already loaded from Shopify, no need in requesting translations service\n    i18n.changeLanguage(newLanguage)\n    close()\n\n    if(newLanguage === 'en')\n      return\n\n    try {\n      addTranslationsFromPO({\n        i18n,\n        lang: newLanguage,\n\n        translations: await (\n          await fetch(`${publicRuntimeConfig.NEXT_PUBLIC_APP_URL}/api/translations/${newLanguage}/products`)\n        ).json(),\n      })\n\n      // The order of i18n.addResources() and i18n.changeLanguage() calls is important\n      i18n.changeLanguage(newLanguage)\n    } catch(error) {\n      console.error(error)\n    }\n  }, [close, i18n])\n\n  const welcomeMessage = useMemo(() => {\n    if(!userCtx.user)\n      return\n\n    return userCtx.user.firstName ? t('helloUsername', {userName: userCtx.user.firstName}) : userCtx.user.email\n  }, [t, userCtx.user])\n\n  const featuredMenuItemsWithNewAndViewAll = useMemo(() => [\n    {\n      category   : 'all',\n      collection : 'all',\n      list       : [],\n      subcategory: 'all',\n      title      : 'view all',\n    },\n\n    {\n      category   : 'all',\n      collection : `${props.gender}s-new`,\n      list       : [],\n      subcategory: 'all',\n      title      : 'New',\n    },\n\n    ...featuredMenuCtx[props.gender],\n  ], [featuredMenuCtx, props.gender])\n\n  const popupRef = useRef(null)\n  useClickOutside({callback: close, intactId: props.intactId, reference: popupRef})\n\n  return <div className={props.className} ref={popupRef}>\n    <button className=\"button\" onClick={close}>\n      <Icon className=\"icon\" name=\"cross\" />\n    </button>\n\n    <div className=\"section\">\n      <div className=\"scroll\">\n        {userCtx.user && <div className=\"welcome\">\n          <div className=\"message\">\n            {welcomeMessage}\n          </div>\n\n          <hr className=\"divider\" />\n        </div>}\n\n        <div className=\"navigation\">\n          <GenderLinks\n            className=\"gender\"\n            close={close}\n            gender={props.gender}\n            isBlogDomain={props.isBlogDomain}\n          />\n\n          <div className=\"list\">\n            {featuredMenuItemsWithNewAndViewAll.map(item => <CategoryItem\n              /* eslint-disable-next-line max-len */\n              as={`/${props.gender}/shop/collection/${item.collection}/category/${item.category}/subcategory/${item.subcategory}${item.tag ? `?tags=${item.tag}` : ''}`}\n              close={close}\n              hasAppDomain={props.isBlogDomain}\n              /* eslint-disable-next-line max-len */\n              href=\"/[gender]/shop/collection/[collection]/category/[category]/subcategory/[subcategory]\"\n              intactId={props.intactId}\n              items={item.list}\n              key={item.title}\n              popupRef={popupRef}\n            >\n              {processMenuItemLabel(t(item.title))}\n            </CategoryItem>)}\n          </div>\n        </div>\n\n        <div className=\"actions\">\n          <hr className=\"divider\" />\n\n          <Link className=\"link type--cart\" href=\"/cart\" onClick={close}>\n            <Icon className=\"icon type--cart\" name=\"cart\" />\n            {processMenuItemLabel(t('myBag'))}\n\n            <span className={cn('counter', {'is-active': cartCtx.itemsCount > 0})}>\n              {cartCtx.itemsCount > 99 ? ':)' : cartCtx.itemsCount}\n            </span>\n          </Link>\n\n          <Link\n            as={`/wish/${props.gender}/category/all/subcategory/all`}\n            className=\"link type--wish\"\n            href=\"/wish/[gender]/category/[category]/subcategory/[subcategory]\"\n            onClick={close}\n          >\n            <Icon className=\"icon type--wish\" name={wishListCtx.list.length > 0 ? 'wish-fill' : 'wish'} />\n            {processMenuItemLabel(t('myWishList'))}\n          </Link>\n\n          <hr className=\"divider\" />\n\n          <Dropdown\n            className=\"dropdown type--language\"\n            currentItem={i18n.language}\n            intactId=\"languages-menu\"\n            list={i18nConfig.allLanguages}\n            onChange={changeLanguage}\n            translations={languagesMap}\n          />\n\n          <hr className=\"divider\" />\n\n          <Dropdown\n            className=\"dropdown type--currency\"\n            currentItem={currencyContext.active}\n            intactId=\"currencies-menu\"\n            list={Object.keys(currenciesMap)}\n            onChange={changeCurrency}\n            translations={currenciesMap}\n          />\n\n          <hr className=\"divider\" />\n          <UserMenu className=\"user-menu-wrapper type--user\" closeMenu={close} welcomeMessage={welcomeMessage} />\n        </div>\n      </div>\n    </div>\n  </div>\n}\n"]},"metadata":{},"sourceType":"module"}