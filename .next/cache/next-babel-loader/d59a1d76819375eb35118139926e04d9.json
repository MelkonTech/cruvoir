{"ast":null,"code":"import * as R from 'ramda';\nimport fetch from 'node-fetch';\nimport { objectToFetchPostParams } from \"../../../../components/common/helpers\";\n/*\nFetch the list of terms and select those that match the pattern\n\ncurl -X POST https://api.poeditor.com/v2/terms/list \\\n  -d api_token=\"e5b59bb2650ac5f326481180090d7665\" \\\n  -d id=\"298541\" \\\n  -d language=\"en\" \\\n*/\n\nexport default (async (req, res) => {\n  res.setHeader('Content-Type', 'application/json');\n\n  try {\n    res.statusCode = 200;\n    res.end(JSON.stringify(R.filter(term => Boolean(term.term.match(/^product(Description|Title)\\-/)))((await (await fetch('https://api.poeditor.com/v2/terms/list', {\n      body: objectToFetchPostParams({\n        api_token: process.env.PO_API_TOKEN,\n        id: process.env.PO_PROJECT_ID,\n        language: req.query.lang.toString()\n      }),\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      method: 'POST'\n    })).json()).result.terms)));\n  } catch (error) {\n    res.statusCode = 503;\n    res.end(JSON.stringify({\n      message: 'Error while requesting translations',\n      success: false\n    }));\n  }\n});","map":null,"metadata":{},"sourceType":"module"}