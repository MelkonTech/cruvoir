{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\nimport * as Yup from 'yup';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport cn from 'classnames';\nimport { Form } from \"./Form\";\nimport { Formik } from 'formik';\nimport getConfig from 'next/config';\nimport { Link } from \"../../Link\";\nimport { Portal } from \"../../Portal\";\nimport styles from \"./index.css\";\nimport { UnderlineWrapper } from \"../../UnderlineWrapper\";\nimport { usePopup } from \"../../hooks\";\nimport { useTranslation } from \"../../../../i18n\";\nconst {\n  publicRuntimeConfig\n} = getConfig();\nexport function NewsletterPopup() {\n  const {\n    t\n  } = useTranslation();\n  const popup = usePopup();\n  const close = useCallback(() => {\n    localStorage.setItem('newsletter-popup', 'disabled');\n    popup.close();\n  }, [popup]);\n  useEffect(() => {\n    if (!localStorage.getItem('newsletter-popup')) setTimeout(popup.show, 10000);\n  }, [popup.show]);\n  const initialValues = useMemo(() => ({\n    email: ''\n  }), []);\n  const subscribeToNewsletter = useCallback(async values => {\n    const response = await (await fetch(`${publicRuntimeConfig.NEXT_PUBLIC_APP_URL}/api/newsletter/subscribe`, {\n      body: JSON.stringify({\n        email: values.email,\n        name: values.name\n      }),\n      headers: {\n        accept: 'application/json'\n      },\n      method: 'POST'\n    })).json();\n    if (response.success) setTimeout(close, 500);\n  }, [close]);\n  const validationSchema = Yup.object().shape({\n    email: Yup.string().email().required()\n  });\n  return __jsx(Portal, {\n    selector: \"#portal-root\"\n  }, __jsx(\"div\", {\n    className: cn(styles.newsletterPopup, {\n      'is-shown': popup.isShown\n    })\n  }, __jsx(\"div\", {\n    className: \"section\"\n  }, __jsx(\"h2\", {\n    className: \"title\"\n  }, t('welcomeTo', {\n    projectName: 'Cruvoir'\n  })), __jsx(\"h2\", {\n    className: \"title\"\n  }, t('welcomeToTeaser')), __jsx(\"h3\", {\n    className: \"title\"\n  }, t('informedActivities')), __jsx(Formik, {\n    initialValues: initialValues,\n    validationSchema: validationSchema,\n    onSubmit: subscribeToNewsletter\n  }, __jsx(Form, {\n    className: \"form\",\n    close: close\n  }))), __jsx(\"p\", {\n    className: \"note\"\n  }, \"By entering your email, you agree to our\", ' ', __jsx(UnderlineWrapper, {\n    className: \"link\",\n    isPermanent: true\n  }, __jsx(Link, {\n    as: \"/privacy-policy\",\n    href: \"/privacy-policy\"\n  }, t('privacyPolicy'))), \".\"), __jsx(\"p\", {\n    className: \"note\"\n  }, __jsx(UnderlineWrapper, {\n    className: \"link\",\n    isPermanent: true\n  }, __jsx(\"a\", {\n    href: \"https://cruvoir.com\"\n  }, t('shopNow').split(' ')[0])), ' ', t('shopNow').split(' ')[1], ' ', \"|\", ' ', t('initialOutlet').split(' ')[0], ' ', __jsx(UnderlineWrapper, {\n    className: \"link\",\n    isPermanent: true\n  }, __jsx(\"a\", {\n    className: \"link\",\n    href: \"https://blog.cruvoir.com\"\n  }, t('initialOutlet').split(' ')[1])), ' ', \"|\", ' ', t('socialNetwork').split(' ')[0], ' ', __jsx(UnderlineWrapper, {\n    className: \"link\",\n    isPermanent: true\n  }, __jsx(\"a\", {\n    className: \"link\",\n    href: \"https://instagram.com/cruvoir/\"\n  }, t('socialNetwork').split(' ')[1]))), __jsx(\"p\", {\n    className: \"note\"\n  }, __jsx(UnderlineWrapper, {\n    className: \"link\",\n    isPermanent: true\n  }, __jsx(\"a\", {\n    className: \"link\",\n    href: \"https://discord.gg/M7qdhnZHMR\"\n  }, \" \", t('discordServer').split(' ')[0])), ' ', t('discordServer').split(' ')[1], ' ', \"|\", ' ', t('scheduleMeeting').split(' ')[0], ' ', t('scheduleMeeting').split(' ')[1], ' ', __jsx(UnderlineWrapper, {\n    className: \"link\",\n    isPermanent: true\n  }, __jsx(\"a\", {\n    className: \"link\",\n    href: \"https://calendly.com/c---31\"\n  }, t('scheduleMeeting').split(' ')[2])))));\n}","map":{"version":3,"sources":["D:/Work/web/direlli/frontend/components/common/Layout/NewsletterPopup/index.tsx"],"names":["Yup","useCallback","useEffect","useMemo","cn","Form","Formik","getConfig","Link","Portal","styles","UnderlineWrapper","usePopup","useTranslation","publicRuntimeConfig","NewsletterPopup","t","popup","close","localStorage","setItem","getItem","setTimeout","show","initialValues","email","subscribeToNewsletter","values","response","fetch","NEXT_PUBLIC_APP_URL","body","JSON","stringify","name","headers","accept","method","json","success","validationSchema","object","shape","string","required","newsletterPopup","isShown","projectName","split"],"mappings":"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","sourcesContent":["import * as Yup from 'yup'\nimport {useCallback, useEffect, useMemo} from 'react'\nimport cn from 'classnames'\nimport {Form} from './Form'\nimport {Formik} from 'formik'\nimport getConfig from 'next/config'\nimport {Link} from 'components/common/Link'\nimport {Portal} from 'components/common/Portal'\nimport styles from './index.css'\nimport {UnderlineWrapper} from 'components/common/UnderlineWrapper'\nimport {usePopup} from 'components/common/hooks'\nimport {useTranslation} from 'i18n'\n\nconst {publicRuntimeConfig} = getConfig()\n\nexport function NewsletterPopup() {\n  const {t} = useTranslation()\n  const popup = usePopup()\n\n  const close = useCallback(() => {\n    localStorage.setItem('newsletter-popup', 'disabled')\n    popup.close()\n  }, [popup])\n\n  useEffect(() => {\n    if (!localStorage.getItem('newsletter-popup'))\n      setTimeout(popup.show, 10000)\n  }, [popup.show])\n\n  const initialValues = useMemo(() => ({email: ''}), [])\n\n  const subscribeToNewsletter = useCallback(async values => {\n    const response = await (await fetch(`${publicRuntimeConfig.NEXT_PUBLIC_APP_URL}/api/newsletter/subscribe`, {\n      body: JSON.stringify({email: values.email, name: values.name}),\n      headers: {accept: 'application/json'},\n      method: 'POST',\n    })).json()\n\n    if (response.success)\n      setTimeout(close, 500)\n  }, [close])\n\n  const validationSchema = Yup.object().shape({\n    email: Yup.string().email().required(),\n  })\n\n  return <Portal selector=\"#portal-root\">\n    <div className={cn(styles.newsletterPopup, {'is-shown': popup.isShown})}>\n      <div className=\"section\">\n        <h2 className=\"title\">{t('welcomeTo', {projectName: 'Cruvoir'})}</h2>\n        <h2 className=\"title\">{t('welcomeToTeaser')}</h2>\n        <h3 className=\"title\">{t('informedActivities')}</h3>\n\n        <Formik\n          initialValues={initialValues}\n          validationSchema={validationSchema}\n          onSubmit={subscribeToNewsletter}\n        >\n          <Form className=\"form\" close={close}/>\n        </Formik>\n      </div>\n\n      <p className=\"note\">\n        By entering your email, you agree to our\n        {' '}\n\n        <UnderlineWrapper className=\"link\" isPermanent>\n          <Link as=\"/privacy-policy\" href=\"/privacy-policy\">{t('privacyPolicy')}</Link>\n        </UnderlineWrapper>\n        .\n      </p>\n\n      <p className=\"note\">\n        <UnderlineWrapper className=\"link\" isPermanent>\n          <a href=\"https://cruvoir.com\">{t('shopNow').split(' ')[0]}</a>\n        </UnderlineWrapper>\n        {' '}{t('shopNow').split(' ')[1]}\n\n        {' '}|{' '}\n\n        {t('initialOutlet').split(' ')[0]}{' '}\n        <UnderlineWrapper className=\"link\" isPermanent>\n          <a className=\"link\" href=\"https://blog.cruvoir.com\">{t('initialOutlet').split(' ')[1]}</a>\n        </UnderlineWrapper>\n\n        {' '}|{' '}\n\n        {t('socialNetwork').split(' ')[0]}{' '}\n        <UnderlineWrapper className=\"link\" isPermanent>\n          <a className=\"link\" href=\"https://instagram.com/cruvoir/\">{t('socialNetwork').split(' ')[1]}</a>\n        </UnderlineWrapper>\n        </p>\n\n      <p className=\"note\">\n        <UnderlineWrapper className=\"link\" isPermanent>\n          <a className=\"link\" href=\"https://discord.gg/M7qdhnZHMR\"> {t('discordServer').split(' ')[0]}</a>\n        </UnderlineWrapper>\n        {' '}{t('discordServer').split(' ')[1]}\n\n        {' '}|{' '}\n\n        {t('scheduleMeeting').split(' ')[0]}{' '}\n        {t('scheduleMeeting').split(' ')[1]}{' '}\n        <UnderlineWrapper className=\"link\" isPermanent>\n          <a className=\"link\" href=\"https://calendly.com/c---31\">{t('scheduleMeeting').split(' ')[2]}</a>\n        </UnderlineWrapper>\n      </p>\n    </div>\n  </Portal>\n}\n"]},"metadata":{},"sourceType":"module"}