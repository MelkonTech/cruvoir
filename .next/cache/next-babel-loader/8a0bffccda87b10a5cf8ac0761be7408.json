{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport 'cross-fetch'; // Do not change the order of import of styles!\n\nimport \"../public/static/reset.css\";\nimport \"../public/static/variables.css\";\nimport \"../public/static/fonts.css\";\nimport \"../public/static/global.css\";\nimport * as R from 'ramda';\nimport { addTranslationsFromPO, getCookie, isServer, prismicClient } from \"../components/common/helpers\";\nimport { ApolloClient, InMemoryCache, IntrospectionFragmentMatcher } from 'apollo-boost';\nimport { PortalProvider } from \"../components/common/Portal\";\nimport { ApolloProvider } from '@apollo/react-hooks';\nimport { AuthModalContextProvider } from \"../components/common/AuthModalContext\";\nimport { CartContextProvider } from \"../components/common/CartContext\";\nimport { createElement } from 'react';\nimport { createHttpLink } from 'apollo-link-http';\nimport { CurrencyContextProvider } from \"../components/common/CurrencyContext\";\nimport Error from 'next/error';\nimport { FeaturedMenuContextProvider } from \"../components/common/FeaturedMenuContext\";\nconst fragmentsTypes = {\n  __schema: {\n    types: [{\n      kind: \"INTERFACE\",\n      name: \"Node\",\n      possibleTypes: [{\n        name: \"AppliedGiftCard\"\n      }, {\n        name: \"Article\"\n      }, {\n        name: \"Blog\"\n      }, {\n        name: \"Checkout\"\n      }, {\n        name: \"CheckoutLineItem\"\n      }, {\n        name: \"Collection\"\n      }, {\n        name: \"Comment\"\n      }, {\n        name: \"MailingAddress\"\n      }, {\n        name: \"Metafield\"\n      }, {\n        name: \"Order\"\n      }, {\n        name: \"Page\"\n      }, {\n        name: \"Payment\"\n      }, {\n        name: \"Product\"\n      }, {\n        name: \"ProductOption\"\n      }, {\n        name: \"ProductVariant\"\n      }, {\n        name: \"ShopPolicy\"\n      }]\n    }, {\n      kind: \"INTERFACE\",\n      name: \"DiscountApplication\",\n      possibleTypes: [{\n        name: \"AutomaticDiscountApplication\"\n      }, {\n        name: \"DiscountCodeApplication\"\n      }, {\n        name: \"ManualDiscountApplication\"\n      }, {\n        name: \"ScriptDiscountApplication\"\n      }]\n    }, {\n      kind: \"UNION\",\n      name: \"PricingValue\",\n      possibleTypes: [{\n        name: \"PricingPercentageValue\"\n      }, {\n        name: \"MoneyV2\"\n      }]\n    }, {\n      kind: \"INTERFACE\",\n      name: \"HasMetafields\",\n      possibleTypes: [{\n        name: \"Product\"\n      }, {\n        name: \"ProductVariant\"\n      }]\n    }, {\n      kind: \"UNION\",\n      name: \"MetafieldParentResource\",\n      possibleTypes: [{\n        name: \"Product\"\n      }, {\n        name: \"ProductVariant\"\n      }]\n    }, {\n      kind: \"INTERFACE\",\n      name: \"DisplayableError\",\n      possibleTypes: [{\n        name: \"CheckoutUserError\"\n      }, {\n        name: \"CustomerUserError\"\n      }, {\n        name: \"UserError\"\n      }]\n    }]\n  }\n};\nimport getConfig from 'next/config';\nimport { getDataFromTree } from '@apollo/react-ssr';\nimport Head from 'next/head';\nimport i18n from \"../i18n\";\nimport { Loading } from \"../components/common/Loading\";\nimport NextApp from 'next/app';\nimport { PageAnimation } from \"../components/common/PageAnimation\";\nimport { PageTransition } from 'next-page-transitions';\nimport Prismic from 'prismic-javascript';\nimport { RecentContextProvider } from \"../components/common/RecentContext\";\nimport { setContext } from 'apollo-link-context';\nimport { UserContextProvider } from \"../components/common/UserContext\";\nimport { WishListContextProvider } from \"../components/common/WishListContext\";\nimport withApollo from 'next-with-apollo';\nconst {\n  publicRuntimeConfig\n} = getConfig();\nif (!isServer()) document.querySelectorAll('[data-react-portal]').forEach(n => n.remove());\n\ntry {\n  if (publicRuntimeConfig.NEXT_PUBLIC_GA_TRACKING_CODE && false && window['ga']) {\n    const ga = window['ga'];\n\n    require('autotrack/autotrack.js');\n\n    ga('create', publicRuntimeConfig.NEXT_PUBLIC_GA_TRACKING_CODE, 'auto');\n    ga('send', 'pageview');\n  }\n} catch (error) {\n  console.error('GA failed');\n  console.error(error);\n}\n\nclass App extends NextApp {\n  static async getInitialProps(params) {\n    var _pageMetatagsResponse, _pageMetatagsResponse2;\n\n    let pageProps = {};\n    let pageMetatagsResponse;\n\n    try {\n      pageMetatagsResponse = (await prismicClient(params.req).query([Prismic.Predicates.at('document.type', 'pagemetatags'), Prismic.Predicates.any('my.pagemetatags.url', [`${publicRuntimeConfig.NEXT_PUBLIC_APP_URL}${params.ctx.asPath}`, `${publicRuntimeConfig.NEXT_PUBLIC_APP_URL}${params.ctx.asPath}/`, `${publicRuntimeConfig.NEXT_PUBLIC_BLOG_URL}${params.ctx.asPath}`, `${publicRuntimeConfig.NEXT_PUBLIC_BLOG_URL}${params.ctx.asPath}/`])], {})).results[0];\n    } catch (error) {\n      console.error('Error while fetching meta tags');\n      console.error(error);\n    }\n\n    const featuredMenuPrismicResponse = {\n      men: await prismicClient(null).query([Prismic.Predicates.at('document.type', 'mens_featured_menu')], {}),\n      women: await prismicClient(null).query([Prismic.Predicates.at('document.type', 'womens_featured_menu')], {})\n    };\n    if (isServer() && !R.includes(params.ctx.req.headers.host.split(':')[0], [publicRuntimeConfig.NEXT_PUBLIC_APP_BLOG_HOST, publicRuntimeConfig.NEXT_PUBLIC_APP_HOST])) return {\n      pageProps: {\n        error: 'Not found',\n        statusCode: 404\n      }\n    };\n\n    try {\n      pageProps = params.Component.getInitialProps ? await params.Component.getInitialProps(params.ctx) : {};\n    } catch (e) {\n      // Is server side\n      if (Boolean(params.ctx.res)) params.ctx.res.statusCode = 500;\n      pageProps = {\n        error: 'Server error',\n        statusCode: 500\n      };\n    } // Fetch products translations from external tool. English is the default language — stored on Shopify side\n\n\n    if (isServer() && params.ctx.req.language && params.ctx.req.language !== 'en') addTranslationsFromPO({\n      i18n: params.ctx.req.i18n,\n      lang: params.ctx.req.language,\n      translations: await (await fetch(`${publicRuntimeConfig.NEXT_PUBLIC_APP_URL.replace('https', 'http')}/api/translations/${params.ctx.req.language}/products`)).json()\n    });\n    let currencyRatesCookie = JSON.parse(getCookie({\n      ctx: params.ctx,\n      name: 'currencyRates'\n    }));\n    return {\n      pageProps: _objectSpread(_objectSpread({}, pageProps), {}, {\n        asPath: params.ctx.asPath,\n        checkoutId: getCookie({\n          ctx: params.ctx,\n          name: 'checkoutId'\n        }),\n        currency: getCookie({\n          ctx: params.ctx,\n          name: 'currency'\n        }) || 'USD',\n        currencyRates: currencyRatesCookie && Object.keys(currencyRatesCookie).length === 0 ? null : currencyRatesCookie,\n        currencyRatesLastUpdatedAt: getCookie({\n          ctx: params.ctx,\n          name: 'currencyRatesLastUpdatedAt'\n        }),\n        featuredMenuPrismicResponse,\n        host: isServer() ? params.ctx.req.headers.host : location.host,\n        isBlogDomain: (isServer() ? params.ctx.req.headers.host : location.host) === publicRuntimeConfig.NEXT_PUBLIC_BLOG_URL.replace(/https?:\\/\\//, ''),\n        metatags: (_pageMetatagsResponse = pageMetatagsResponse) === null || _pageMetatagsResponse === void 0 ? void 0 : _pageMetatagsResponse.data.metatags,\n        pageTitle: (_pageMetatagsResponse2 = pageMetatagsResponse) === null || _pageMetatagsResponse2 === void 0 ? void 0 : _pageMetatagsResponse2.data.title,\n        pathname: params.ctx.pathname,\n        query: params.ctx.query,\n        userToken: getCookie({\n          ctx: params.ctx,\n          name: 'token'\n        })\n      })\n    };\n  }\n\n  render() {\n    if (this.props.pageProps.statusCode === 404) return __jsx(Error, {\n      statusCode: 404\n    });\n    return __jsx(ApolloProvider, {\n      client: this.props.apollo\n    }, __jsx(Head, null, __jsx(\"title\", null, this.props.pageProps.pageTitle || 'Cruvoir'), __jsx(\"link\", {\n      href: \"/static/favicons/dark/16.png\",\n      media: \"(prefers-color-scheme: dark)\",\n      rel: \"icon\",\n      sizes: \"16x16\",\n      type: \"image/png\"\n    }), __jsx(\"link\", {\n      href: \"/static/favicons/dark/32.png\",\n      media: \"(prefers-color-scheme: dark)\",\n      rel: \"icon\",\n      sizes: \"32x32\",\n      type: \"image/png\"\n    }), __jsx(\"link\", {\n      href: \"/static/favicons/dark/60.png\",\n      media: \"(prefers-color-scheme: dark)\",\n      rel: \"icon\",\n      sizes: \"60x60\",\n      type: \"image/png\"\n    }), __jsx(\"link\", {\n      href: \"/static/favicons/light/16.png\",\n      media: \"(prefers-color-scheme: light)\",\n      rel: \"icon\",\n      sizes: \"16x16\",\n      type: \"image/png\"\n    }), __jsx(\"link\", {\n      href: \"/static/favicons/light/32.png\",\n      media: \"(prefers-color-scheme: light)\",\n      rel: \"icon\",\n      sizes: \"32x32\",\n      type: \"image/png\"\n    }), __jsx(\"link\", {\n      href: \"/static/favicons/light/60.png\",\n      media: \"(prefers-color-scheme: light)\",\n      rel: \"icon\",\n      sizes: \"60x60\",\n      type: \"image/png\"\n    }), __jsx(\"meta\", {\n      content: \"width = device-width, minimum-scale = 1, initial-scale = 1, user-scalable = no\",\n      key: \"viewport\",\n      name: \"viewport\"\n    }), R.map(metatag => __jsx(\"meta\", {\n      content: metatag.content,\n      key: metatag.name,\n      name: metatag.name\n    }), this.props.pageProps.metatags || []), __jsx(\"script\", {\n      type: \"text/javascript\",\n      src: \"/static/intercom.js\"\n    }), __jsx(\"script\", {\n      type: \"text/javascript\",\n      src: `https://static.cdn.prismic.io/prismic.min.js?new=true&repo=${publicRuntimeConfig.NEXT_PUBLIC_PRISMIC_REPO}`\n    }), __jsx(\"script\", {\n      dangerouslySetInnerHTML: {\n        __html: `!function(f,b,e,v,n,t,s)\n          {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n          n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n          if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n          n.queue=[];t=b.createElement(e);t.async=!0;\n          t.src=v;s=b.getElementsByTagName(e)[0];\n          s.parentNode.insertBefore(t,s)}(window, document,'script',\n          'https://connect.facebook.net/en_US/fbevents.js');\n          fbq('init', '${publicRuntimeConfig.NEXT_PUBLIC_FACEBOOK_PIXEL_ID}');\n          fbq('track', 'PageView');`\n      }\n    }), __jsx(\"script\", {\n      async: true,\n      src: \"https://www.google-analytics.com/analytics.js\"\n    })), __jsx(CurrencyContextProvider, {\n      initialCurrency: this.props.pageProps.currency,\n      initialRates: this.props.pageProps.currencyRates,\n      initialRatesLastUpdatedAt: this.props.pageProps.currencyRatesLastUpdatedAt\n    }, __jsx(PortalProvider, {\n      manager: this.props.portalManager\n    }, __jsx(CartContextProvider, {\n      initialValue: {\n        checkoutId: this.props.pageProps.checkoutId\n      }\n    }, __jsx(AuthModalContextProvider, null, __jsx(UserContextProvider, {\n      initialValue: {\n        token: this.props.pageProps.userToken\n      }\n    }, __jsx(RecentContextProvider, null, __jsx(FeaturedMenuContextProvider, {\n      menPrismicResponse: this.props.pageProps.featuredMenuPrismicResponse.men,\n      womenPrismicResponse: this.props.pageProps.featuredMenuPrismicResponse.women\n    }, __jsx(WishListContextProvider, null, this.props.pageProps.hasPageTransition ? __jsx(PageTransition, {\n      classNames: \"state\",\n      loadingComponent: __jsx(Loading, {\n        isShown: true\n      }),\n      loadingTimeout: 0,\n      monkeyPatchScrolling: true,\n      skipInitialTransition: true,\n      tag: PageAnimation,\n      timeout: 1000\n    }, /*#__PURE__*/createElement(this.props.Component, this.props.pageProps)) : /*#__PURE__*/createElement(this.props.Component, this.props.pageProps))))))))), __jsx(\"div\", {\n      id: \"portal-root\"\n    }));\n  }\n\n}\n\nexport default withApollo(params => new ApolloClient({\n  cache: new InMemoryCache({\n    fragmentMatcher: new IntrospectionFragmentMatcher({\n      introspectionQueryResultData: fragmentsTypes\n    })\n  }).restore(params.initialState || {}),\n  link: setContext((_, linkParams) => _objectSpread({}, linkParams.isInternalAPI && {\n    headers: {\n      'X-Hasura-Role': 'public'\n    }\n  })).concat(createHttpLink({\n    credentials: 'same-origin',\n    fetch: fetch,\n    headers: {\n      // Accept and Content-Type headers are required by Storefront API\n      accept: 'application/json',\n      'content-type': 'application/json',\n      'x-shopify-storefront-access-token': publicRuntimeConfig.NEXT_PUBLIC_SHOPIFY_STOREFRONT_API_TOKEN\n    },\n    uri: uriParams => {\n      if (uriParams.getContext().isInternalAPI) return publicRuntimeConfig.NEXT_PUBLIC_INTERNAL_API_URL;else return publicRuntimeConfig.NEXT_PUBLIC_SHOPIFY_STOREFRONT_API_URL;\n    }\n  }))\n}), {\n  getDataFromTree\n})(i18n.appWithTranslation(App));","map":{"version":3,"sources":["D:/Work/web/direlli/frontend/pages/_app.tsx"],"names":["R","addTranslationsFromPO","getCookie","isServer","prismicClient","ApolloClient","InMemoryCache","IntrospectionFragmentMatcher","PortalProvider","ApolloProvider","AuthModalContextProvider","CartContextProvider","createElement","createHttpLink","CurrencyContextProvider","Error","FeaturedMenuContextProvider","getConfig","getDataFromTree","Head","i18n","Loading","NextApp","PageAnimation","PageTransition","Prismic","RecentContextProvider","setContext","UserContextProvider","WishListContextProvider","withApollo","publicRuntimeConfig","document","querySelectorAll","forEach","n","remove","NEXT_PUBLIC_GA_TRACKING_CODE","window","ga","require","error","console","App","getInitialProps","params","pageProps","pageMetatagsResponse","req","query","Predicates","at","any","NEXT_PUBLIC_APP_URL","ctx","asPath","NEXT_PUBLIC_BLOG_URL","results","featuredMenuPrismicResponse","men","women","includes","headers","host","split","NEXT_PUBLIC_APP_BLOG_HOST","NEXT_PUBLIC_APP_HOST","statusCode","Component","e","Boolean","res","language","lang","translations","fetch","replace","json","currencyRatesCookie","JSON","parse","name","checkoutId","currency","currencyRates","Object","keys","length","currencyRatesLastUpdatedAt","location","isBlogDomain","metatags","data","pageTitle","title","pathname","userToken","render","props","apollo","map","metatag","content","NEXT_PUBLIC_PRISMIC_REPO","__html","NEXT_PUBLIC_FACEBOOK_PIXEL_ID","portalManager","token","hasPageTransition","cache","fragmentMatcher","introspectionQueryResultData","fragmentsTypes","restore","initialState","link","_","linkParams","isInternalAPI","concat","credentials","accept","NEXT_PUBLIC_SHOPIFY_STOREFRONT_API_TOKEN","uri","uriParams","getContext","NEXT_PUBLIC_INTERNAL_API_URL","NEXT_PUBLIC_SHOPIFY_STOREFRONT_API_URL","appWithTranslation"],"mappings":"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","sourcesContent":["import 'cross-fetch'\n\n// Do not change the order of import of styles!\nimport 'public/static/reset.css'\nimport 'public/static/variables.css'\nimport 'public/static/fonts.css'\nimport 'public/static/global.css'\nimport * as R from 'ramda'\nimport {addTranslationsFromPO, getCookie, isServer, prismicClient} from 'components/common/helpers'\nimport {ApolloClient, InMemoryCache, IntrospectionFragmentMatcher} from 'apollo-boost'\nimport {PortalManager, PortalProvider} from 'components/common/Portal'\nimport {ApolloProvider} from '@apollo/react-hooks'\nimport {AuthModalContextProvider} from 'components/common/AuthModalContext'\nimport {CartContextProvider} from 'components/common/CartContext'\nimport {createElement} from 'react'\nimport {createHttpLink} from 'apollo-link-http'\nimport {CurrencyContextProvider} from 'components/common/CurrencyContext'\nimport Error from 'next/error'\nimport {FeaturedMenuContextProvider} from 'components/common/FeaturedMenuContext'\nimport fragmentsTypes from 'fragments-types.json'\nimport getConfig from 'next/config'\nimport {getDataFromTree} from '@apollo/react-ssr'\nimport Head from 'next/head'\nimport i18n from 'i18n'\nimport {Loading} from 'components/common/Loading'\nimport NextApp from 'next/app'\nimport {PageAnimation} from 'components/common/PageAnimation'\nimport {PageTransition} from 'next-page-transitions'\nimport Prismic from 'prismic-javascript'\nimport {RecentContextProvider} from 'components/common/RecentContext'\nimport {setContext} from 'apollo-link-context'\nimport {UserContextProvider} from 'components/common/UserContext'\nimport {WishListContextProvider} from 'components/common/WishListContext'\nimport withApollo from 'next-with-apollo'\nconst {publicRuntimeConfig} = getConfig()\n\nif(!isServer())\n  document.querySelectorAll('[data-react-portal]').forEach(n => n.remove())\n\ntry {\n  if(\n    publicRuntimeConfig.NEXT_PUBLIC_GA_TRACKING_CODE &&\n    typeof window !== 'undefined' &&\n    window['ga']\n  ) {\n    const ga = window['ga']\n    require('autotrack/autotrack.js')\n    ga('create', publicRuntimeConfig.NEXT_PUBLIC_GA_TRACKING_CODE, 'auto')\n    ga('send', 'pageview')\n  }\n} catch(error) {\n  console.error('GA failed')\n  console.error(error)\n}\n\nclass App extends NextApp<{apollo: ApolloClient<InMemoryCache>, portalManager: PortalManager}> {\n  static async getInitialProps(params) {\n    let pageProps = {}\n    let pageMetatagsResponse\n\n    try {\n      pageMetatagsResponse = (await prismicClient(params.req).query(\n        [\n          Prismic.Predicates.at('document.type', 'pagemetatags'),\n\n          Prismic.Predicates.any('my.pagemetatags.url', [\n            `${publicRuntimeConfig.NEXT_PUBLIC_APP_URL}${params.ctx.asPath}`,\n            `${publicRuntimeConfig.NEXT_PUBLIC_APP_URL}${params.ctx.asPath}/`,\n            `${publicRuntimeConfig.NEXT_PUBLIC_BLOG_URL}${params.ctx.asPath}`,\n            `${publicRuntimeConfig.NEXT_PUBLIC_BLOG_URL}${params.ctx.asPath}/`,\n          ]),\n        ],\n\n        {},\n      )).results[0]\n    } catch(error) {\n      console.error('Error while fetching meta tags')\n      console.error(error)\n    }\n\n    const featuredMenuPrismicResponse = {\n      men  : await prismicClient(null).query([Prismic.Predicates.at('document.type', 'mens_featured_menu')], {}),\n      women: await prismicClient(null).query([Prismic.Predicates.at('document.type', 'womens_featured_menu')], {}),\n    }\n\n    if(isServer() && !R.includes(\n      params.ctx.req.headers.host.split(':')[0],\n      [publicRuntimeConfig.NEXT_PUBLIC_APP_BLOG_HOST, publicRuntimeConfig.NEXT_PUBLIC_APP_HOST],\n    ))\n      return {pageProps: {error: 'Not found', statusCode: 404}}\n\n    try {\n      pageProps = params.Component.getInitialProps ? await params.Component.getInitialProps(params.ctx) : {}\n    } catch(e) {\n      // Is server side\n      if(Boolean(params.ctx.res))\n        params.ctx.res.statusCode = 500\n\n      pageProps = {error: 'Server error', statusCode: 500}\n    }\n\n    // Fetch products translations from external tool. English is the default language — stored on Shopify side\n    if(isServer() && params.ctx.req.language && params.ctx.req.language !== 'en')\n      addTranslationsFromPO({\n        i18n: params.ctx.req.i18n,\n        lang: params.ctx.req.language,\n\n        translations: await (\n          await fetch(`${\n            publicRuntimeConfig.NEXT_PUBLIC_APP_URL.replace('https', 'http')\n          }/api/translations/${params.ctx.req.language}/products`)\n        ).json(),\n      })\n\n    let currencyRatesCookie = JSON.parse(getCookie({ctx: params.ctx, name: 'currencyRates'}));\n    return {pageProps: {\n        ...pageProps,\n        asPath                    : params.ctx.asPath,\n        checkoutId                : getCookie({ctx: params.ctx, name: 'checkoutId'}),\n        currency                  : getCookie({ctx: params.ctx, name: 'currency'}) || 'USD',\n        currencyRates             : currencyRatesCookie && Object.keys(currencyRatesCookie).length === 0 ? null : currencyRatesCookie,\n        currencyRatesLastUpdatedAt: getCookie({ctx: params.ctx, name: 'currencyRatesLastUpdatedAt'}),\n        featuredMenuPrismicResponse,\n        host                      : isServer() ? params.ctx.req.headers.host : location.host,\n\n        isBlogDomain: (\n          isServer() ? params.ctx.req.headers.host : location.host\n        ) === publicRuntimeConfig.NEXT_PUBLIC_BLOG_URL.replace(/https?:\\/\\//, ''),\n\n        metatags : pageMetatagsResponse?.data.metatags,\n        pageTitle: pageMetatagsResponse?.data.title,\n        pathname : params.ctx.pathname,\n        query    : params.ctx.query,\n        userToken: getCookie({ctx: params.ctx, name: 'token'}),\n      }}\n  }\n\n  render() {\n    if(this.props.pageProps.statusCode === 404)\n      return <Error statusCode={404} />\n\n    return <ApolloProvider client={this.props.apollo}>\n      <Head>\n        <title>{this.props.pageProps.pageTitle || 'Cruvoir'}</title>\n        {/* eslint-disable max-len */}\n        <link href=\"/static/favicons/dark/16.png\" media=\"(prefers-color-scheme: dark)\" rel=\"icon\" sizes=\"16x16\" type=\"image/png\" />\n        <link href=\"/static/favicons/dark/32.png\" media=\"(prefers-color-scheme: dark)\" rel=\"icon\" sizes=\"32x32\" type=\"image/png\" />\n        <link href=\"/static/favicons/dark/60.png\" media=\"(prefers-color-scheme: dark)\" rel=\"icon\" sizes=\"60x60\" type=\"image/png\" />\n        <link href=\"/static/favicons/light/16.png\" media=\"(prefers-color-scheme: light)\" rel=\"icon\" sizes=\"16x16\" type=\"image/png\" />\n        <link href=\"/static/favicons/light/32.png\" media=\"(prefers-color-scheme: light)\" rel=\"icon\" sizes=\"32x32\" type=\"image/png\" />\n        <link href=\"/static/favicons/light/60.png\" media=\"(prefers-color-scheme: light)\" rel=\"icon\" sizes=\"60x60\" type=\"image/png\" />\n        {/* eslint-enable max-len */}\n\n        <meta\n          content=\"width = device-width, minimum-scale = 1, initial-scale = 1, user-scalable = no\"\n          key=\"viewport\"\n          name=\"viewport\"\n        />\n\n        {R.map(\n          metatag => <meta content={metatag.content} key={metatag.name} name={metatag.name} />,\n          this.props.pageProps.metatags || [],\n        )}\n\n        <script type=\"text/javascript\" src=\"/static/intercom.js\" />\n        <script type=\"text/javascript\" src={`https://static.cdn.prismic.io/prismic.min.js?new=true&repo=${publicRuntimeConfig.NEXT_PUBLIC_PRISMIC_REPO}`} />\n\n        <script dangerouslySetInnerHTML={{__html: `!function(f,b,e,v,n,t,s)\n          {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n          n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n          if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n          n.queue=[];t=b.createElement(e);t.async=!0;\n          t.src=v;s=b.getElementsByTagName(e)[0];\n          s.parentNode.insertBefore(t,s)}(window, document,'script',\n          'https://connect.facebook.net/en_US/fbevents.js');\n          fbq('init', '${publicRuntimeConfig.NEXT_PUBLIC_FACEBOOK_PIXEL_ID}');\n          fbq('track', 'PageView');`}}\n        />\n\n        <script async src=\"https://www.google-analytics.com/analytics.js\" />\n      </Head>\n\n      <CurrencyContextProvider\n        initialCurrency={this.props.pageProps.currency}\n        initialRates={this.props.pageProps.currencyRates}\n        initialRatesLastUpdatedAt={this.props.pageProps.currencyRatesLastUpdatedAt}\n      >\n        <PortalProvider manager={this.props.portalManager}>\n          <CartContextProvider initialValue={{checkoutId: this.props.pageProps.checkoutId}}>\n            <AuthModalContextProvider>\n              <UserContextProvider initialValue={{token: this.props.pageProps.userToken}}>\n                <RecentContextProvider>\n                  <FeaturedMenuContextProvider\n                    menPrismicResponse={this.props.pageProps.featuredMenuPrismicResponse.men}\n                    womenPrismicResponse={this.props.pageProps.featuredMenuPrismicResponse.women}\n                  >\n                    <WishListContextProvider>\n                      {this.props.pageProps.hasPageTransition\n                        ? <PageTransition\n                          classNames=\"state\"\n                          loadingComponent={<Loading isShown={true} />}\n                          loadingTimeout={0}\n                          monkeyPatchScrolling={true}\n                          skipInitialTransition={true}\n                          tag={PageAnimation}\n                          timeout={1000}\n                        >\n                          {createElement(this.props.Component, this.props.pageProps)}\n                        </PageTransition>\n\n                        : createElement(this.props.Component, this.props.pageProps)\n                      }\n                    </WishListContextProvider>\n                  </FeaturedMenuContextProvider>\n                </RecentContextProvider>\n              </UserContextProvider>\n            </AuthModalContextProvider>\n          </CartContextProvider>\n        </PortalProvider>\n      </CurrencyContextProvider>\n\n      <div id=\"portal-root\" />\n    </ApolloProvider>\n  }\n}\n\nexport default withApollo(params => new ApolloClient({\n  cache: new InMemoryCache({\n    fragmentMatcher: new IntrospectionFragmentMatcher({\n      introspectionQueryResultData: fragmentsTypes,\n    }),\n  }).restore(params.initialState || {}),\n\n  link: setContext((_, linkParams) => ({\n    ...linkParams.isInternalAPI && {headers: {'X-Hasura-Role': 'public'}},\n  })).concat(createHttpLink({\n    credentials: 'same-origin',\n    fetch      : fetch,\n\n    headers: {\n\n      // Accept and Content-Type headers are required by Storefront API\n      accept                             : 'application/json',\n      'content-type'                     : 'application/json',\n      'x-shopify-storefront-access-token': publicRuntimeConfig.NEXT_PUBLIC_SHOPIFY_STOREFRONT_API_TOKEN,\n    },\n\n    uri: uriParams => {\n      if(uriParams.getContext().isInternalAPI)\n        return publicRuntimeConfig.NEXT_PUBLIC_INTERNAL_API_URL\n      else\n        return publicRuntimeConfig.NEXT_PUBLIC_SHOPIFY_STOREFRONT_API_URL\n    },\n  })),\n}), {getDataFromTree})(i18n.appWithTranslation(App))\n"]},"metadata":{},"sourceType":"module"}