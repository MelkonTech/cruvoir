{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport * as R from 'ramda';\nimport { createContext, useMemo } from 'react';\nexport const FeaturedMenuContext = /*#__PURE__*/createContext({\n  men: [],\n  women: []\n});\nconst prismicResponseToFeaturedMenuItems = R.compose(R.map(menuSection => ({\n  category: menuSection[0] !== 'designers' ? 'all' : menuSection[0],\n  collection: 'all',\n  list: R.compose(R.map(menuItem => {\n    const url = R.pathOr('', ['url', 'url'], menuItem);\n    const title = R.pathOr('', ['title', 0, 'text'], menuItem);\n\n    const routeParam = name => (new RegExp(`/${name}/(.*?)/`, 'i').exec(`${url.split('?')[0]}/`) || [])[1];\n\n    return _objectSpread({\n      category: routeParam('category'),\n      collection: routeParam('collection'),\n      gender: url.replace(/https?:\\/\\//, '').split('/')[1],\n      image: R.pathOr(null, ['image', 'url'], menuItem),\n      subcategory: routeParam('subcategory'),\n      tag: url.match(/tags=/i) ? url.split('tags=')[1].split('&')[0].split(',') : null,\n      title\n    }, !url.match(/men\\/shop/gi) && {\n      url\n    });\n  }), // Prismic sometimes sends empty items\n  R.filter(R.path(['title', 0, 'text'])))(menuSection[1]),\n  subcategory: 'all',\n  title: menuSection[0]\n})), R.toPairs, R.pathOr({}, ['results', 0, 'data']));\nexport function FeaturedMenuContextProvider(props) {\n  const value = useMemo(() => ({\n    men: prismicResponseToFeaturedMenuItems(props.menPrismicResponse),\n    women: prismicResponseToFeaturedMenuItems(props.womenPrismicResponse)\n  }), [props.menPrismicResponse, props.womenPrismicResponse]);\n  return __jsx(FeaturedMenuContext.Provider, {\n    value: value\n  }, props.children);\n}","map":{"version":3,"sources":["D:/Work/web/direlli/frontend/components/common/FeaturedMenuContext/index.tsx"],"names":["R","createContext","useMemo","FeaturedMenuContext","men","women","prismicResponseToFeaturedMenuItems","compose","map","menuSection","category","collection","list","menuItem","url","pathOr","title","routeParam","name","RegExp","exec","split","gender","replace","image","subcategory","tag","match","filter","path","toPairs","FeaturedMenuContextProvider","props","value","menPrismicResponse","womenPrismicResponse","children"],"mappings":";;;;;;;;;AAAA,OAAO,KAAKA,CAAZ,MAAmB,OAAnB;AACA,SAAQC,aAAR,EAAkCC,OAAlC,QAAgD,OAAhD;AAmBA,OAAO,MAAMC,mBAAmB,gBAAGF,aAAa,CAAe;AAC7DG,EAAAA,GAAG,EAAI,EADsD;AAE7DC,EAAAA,KAAK,EAAE;AAFsD,CAAf,CAAzC;AAKP,MAAMC,kCAAkC,GAAGN,CAAC,CAACO,OAAF,CAMzCP,CAAC,CAACQ,GAAF,CAAMC,WAAW,KAAK;AACpBC,EAAAA,QAAQ,EAAID,WAAW,CAAC,CAAD,CAAX,KAAmB,WAAnB,GAAiC,KAAjC,GAAyCA,WAAW,CAAC,CAAD,CAD5C;AAEpBE,EAAAA,UAAU,EAAE,KAFQ;AAIpBC,EAAAA,IAAI,EAAEZ,CAAC,CAACO,OAAF,CACJP,CAAC,CAACQ,GAAF,CAAMK,QAAQ,IAAI;AAChB,UAAMC,GAAG,GAAGd,CAAC,CAACe,MAAF,CAAS,EAAT,EAAa,CAAC,KAAD,EAAQ,KAAR,CAAb,EAA6BF,QAA7B,CAAZ;AACA,UAAMG,KAAK,GAAGhB,CAAC,CAACe,MAAF,CAAS,EAAT,EAAa,CAAC,OAAD,EAAU,CAAV,EAAa,MAAb,CAAb,EAAmCF,QAAnC,CAAd;;AAEA,UAAMI,UAAU,GAAIC,IAAD,IAA0B,CAAC,IAAIC,MAAJ,CAAY,IAAGD,IAAK,SAApB,EAA8B,GAA9B,EAC3CE,IAD2C,CACrC,GAAEN,GAAG,CAACO,KAAJ,CAAU,GAAV,EAAe,CAAf,CAAkB,GADiB,KACV,EADS,EACL,CADK,CAA7C;;AAGA;AACEX,MAAAA,QAAQ,EAAKO,UAAU,CAAC,UAAD,CADzB;AAEEN,MAAAA,UAAU,EAAGM,UAAU,CAAC,YAAD,CAFzB;AAGEK,MAAAA,MAAM,EAAOR,GAAG,CAACS,OAAJ,CAAY,aAAZ,EAA2B,EAA3B,EAA+BF,KAA/B,CAAqC,GAArC,EAA0C,CAA1C,CAHf;AAIEG,MAAAA,KAAK,EAAQxB,CAAC,CAACe,MAAF,CAAS,IAAT,EAAe,CAAC,OAAD,EAAU,KAAV,CAAf,EAAiCF,QAAjC,CAJf;AAKEY,MAAAA,WAAW,EAAER,UAAU,CAAC,aAAD,CALzB;AAMES,MAAAA,GAAG,EAAUZ,GAAG,CAACa,KAAJ,CAAU,QAAV,IAAsBb,GAAG,CAACO,KAAJ,CAAU,OAAV,EAAmB,CAAnB,EAAsBA,KAAtB,CAA4B,GAA5B,EAAiC,CAAjC,EAAoCA,KAApC,CAA0C,GAA1C,CAAtB,GAAuE,IANtF;AAOEL,MAAAA;AAPF,OAQK,CAACF,GAAG,CAACa,KAAJ,CAAU,aAAV,CAAD,IAA6B;AAACb,MAAAA;AAAD,KARlC;AAUD,GAjBD,CADI,EAoBJ;AACAd,EAAAA,CAAC,CAAC4B,MAAF,CAAS5B,CAAC,CAAC6B,IAAF,CAAO,CAAC,OAAD,EAAU,CAAV,EAAa,MAAb,CAAP,CAAT,CArBI,EAsBJpB,WAAW,CAAC,CAAD,CAtBP,CAJc;AA4BpBgB,EAAAA,WAAW,EAAE,KA5BO;AA6BpBT,EAAAA,KAAK,EAAQP,WAAW,CAAC,CAAD;AA7BJ,CAAL,CAAjB,CANyC,EAsCzCT,CAAC,CAAC8B,OAtCuC,EAuCzC9B,CAAC,CAACe,MAAF,CAAmC,EAAnC,EAAuC,CAAC,SAAD,EAAY,CAAZ,EAAe,MAAf,CAAvC,CAvCyC,CAA3C;AA0CA,OAAO,SAASgB,2BAAT,CAAqCC,KAArC,EAIJ;AACD,QAAMC,KAAK,GAAG/B,OAAO,CAAC,OAAO;AAC3BE,IAAAA,GAAG,EAAIE,kCAAkC,CAAC0B,KAAK,CAACE,kBAAP,CADd;AAE3B7B,IAAAA,KAAK,EAAEC,kCAAkC,CAAC0B,KAAK,CAACG,oBAAP;AAFd,GAAP,CAAD,EAGjB,CAACH,KAAK,CAACE,kBAAP,EAA2BF,KAAK,CAACG,oBAAjC,CAHiB,CAArB;AAKA,SAAO,MAAC,mBAAD,CAAqB,QAArB;AAA8B,IAAA,KAAK,EAAEF;AAArC,KACJD,KAAK,CAACI,QADF,CAAP;AAGD","sourcesContent":["import * as R from 'ramda'\nimport {createContext, ReactNode, useMemo} from 'react'\nimport {FeaturedMenuItem} from 'components/common/types'\nimport {Gender} from 'components/common/types'\ntype PrismicResponse = {results: {data: Record<string, object[]>}[]}\n\ntype FeaturedMenuItems = {\n  category: string\n  collection: string\n  tag?: string[]\n  subcategory: string\n  title: string\n  list: FeaturedMenuItem[]\n}[]\n\ntype ContextValue = {\n  men: FeaturedMenuItems\n  women: FeaturedMenuItems\n}\n\nexport const FeaturedMenuContext = createContext<ContextValue>({\n  men  : [],\n  women: [],\n})\n\nconst prismicResponseToFeaturedMenuItems = R.compose<\n  PrismicResponse,\n  Record<string, object[]>,\n  [string, object[]][],\n  FeaturedMenuItems\n>(\n  R.map(menuSection => ({\n    category  : menuSection[0] !== 'designers' ? 'all' : menuSection[0],\n    collection: 'all',\n\n    list: R.compose<object[], object[], FeaturedMenuItem[]>(\n      R.map(menuItem => {\n        const url = R.pathOr('', ['url', 'url'], menuItem)\n        const title = R.pathOr('', ['title', 0, 'text'], menuItem)\n\n        const routeParam = (name: string): string => (new RegExp(`/${name}/(.*?)/`, 'i')\n          .exec(`${url.split('?')[0]}/`) || [])[1]\n\n        return {\n          category   : routeParam('category'),\n          collection : routeParam('collection'),\n          gender     : url.replace(/https?:\\/\\//, '').split('/')[1] as Gender,\n          image      : R.pathOr(null, ['image', 'url'], menuItem),\n          subcategory: routeParam('subcategory'),\n          tag        : url.match(/tags=/i) ? url.split('tags=')[1].split('&')[0].split(',') : null,\n          title,\n          ...!url.match(/men\\/shop/gi) && {url},\n        }\n      }),\n\n      // Prismic sometimes sends empty items\n      R.filter(R.path(['title', 0, 'text'])),\n    )(menuSection[1]),\n\n    subcategory: 'all',\n    title      : menuSection[0],\n  })),\n\n  R.toPairs,\n  R.pathOr<Record<string, object[]>>({}, ['results', 0, 'data']),\n)\n\nexport function FeaturedMenuContextProvider(props: {\n  children: ReactNode\n  menPrismicResponse: PrismicResponse\n  womenPrismicResponse: PrismicResponse\n}) {\n  const value = useMemo(() => ({\n    men  : prismicResponseToFeaturedMenuItems(props.menPrismicResponse),\n    women: prismicResponseToFeaturedMenuItems(props.womenPrismicResponse),\n  }), [props.menPrismicResponse, props.womenPrismicResponse])\n\n  return <FeaturedMenuContext.Provider value={value}>\n    {props.children}\n  </FeaturedMenuContext.Provider>\n}\n"]},"metadata":{},"sourceType":"module"}